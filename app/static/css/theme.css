/* Theme variables and utility classes */
:root{
  /* Light theme: Warm beige base */
  --base-h: 38;    /* hue - warm beige tone */
  --base-s: 25;    /* saturation */
  --base-l: 85;    /* lightness - light beige background */

  /* Primary colors - beige tones */
  --primary: hsl(38, 35%, 55%);
  --primary-dark: hsl(38, 40%, 45%);
  --primary-light: hsl(38, 30%, 70%);
  --accent: hsl(38, 20%, 75%);

  /* Background colors - soft beige */
  --bg: hsl(38, 15%, 95%);
  --card: hsl(38, 12%, 98%);
  --surface: hsl(38, 10%, 92%);
  
  /* Text colors - dark brown/charcoal on beige */
  --text: hsl(38, 15%, 15%);
  --text-secondary: hsl(38, 10%, 35%);
  --muted: hsl(38, 8%, 50%);

  /* Header / nav */
  --header-bg: hsl(38, 12%, 97%);
  --header-text: var(--text);
  --header-border: hsl(38, 8%, 88%);
  --card-border: hsl(38, 8%, 90%);
  --header-h: 3.5rem;
  
  /* Interactive elements */
  --focus-ring: 0 0 0 3px hsl(38, 35%, 55%, 0.2);
  --btn-bg: var(--primary);
  --btn-text: #ffffff;
  --btn-hover: var(--primary-dark);

  /* UI helpers */
  --muted-border: hsl(38, 8%, 88%);
  --hover-bg: hsl(38, 10%, 90%);
  --avatar-border: hsl(38, 15%, 80%);
  --shadow: 0 2px 8px rgba(38, 25%, 15%, 0.08);
  --shadow-strong: 0 4px 16px rgba(38, 25%, 15%, 0.12);

  /* Status colors - theme-aware */
  --success: hsl(142, 50%, 45%);
  --success-bg: hsl(142, 50%, 95%);
  --error: hsl(0, 65%, 50%);
  --error-bg: hsl(0, 50%, 96%);
  --warning: hsl(38, 70%, 50%);
  --warning-bg: hsl(38, 50%, 95%);
  --info: hsl(210, 60%, 50%);
  --info-bg: hsl(210, 50%, 96%);
}

.dark {
  /* Dark theme: Deep slate blue with warm accents */
  --base-h: 220;   /* hue - deep blue/slate */
  --base-s: 25;    /* saturation */
  --base-l: 12;    /* lightness - very dark */

  /* Primary colors - warm amber/orange for contrast */
  --primary: hsl(25, 85%, 60%);
  --primary-dark: hsl(25, 85%, 50%);
  --primary-light: hsl(25, 70%, 70%);
  --accent: hsl(220, 30%, 25%);

  /* Background colors - deep slate */
  --bg: hsl(220, 20%, 10%);
  --card: hsl(220, 18%, 14%);
  --surface: hsl(220, 15%, 12%);
  
  /* Text colors - light on dark */
  --text: hsl(220, 10%, 92%);
  --text-secondary: hsl(220, 8%, 75%);
  --muted: hsl(220, 8%, 60%);

  /* Header / nav */
  --header-bg: hsl(220, 18%, 14%);
  --header-text: var(--text);
  --header-border: hsl(220, 15%, 20%);
  --card-border: hsl(220, 15%, 22%);

  /* Interactive elements */
  --focus-ring: 0 0 0 3px hsl(25, 85%, 60%, 0.3);
  --btn-bg: var(--primary);
  --btn-text: #1a1a1a;
  --btn-hover: var(--primary-dark);

  /* UI helpers */
  --muted-border: hsl(220, 15%, 22%);
  --hover-bg: hsl(220, 15%, 18%);
  --avatar-border: hsl(220, 20%, 30%);
  --shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
  --shadow-strong: 0 8px 24px rgba(0, 0, 0, 0.5);

  /* Status colors - adjusted for dark theme */
  --success: hsl(142, 55%, 55%);
  --success-bg: hsl(142, 40%, 20%);
  --error: hsl(0, 70%, 60%);
  --error-bg: hsl(0, 50%, 20%);
  --warning: hsl(25, 85%, 60%);
  --warning-bg: hsl(25, 60%, 20%);
  --info: hsl(210, 70%, 60%);
  --info-bg: hsl(210, 50%, 20%);
}
body{
  background: var(--bg);
  color: var(--text);
  transition: background-color 0.2s ease, color 0.2s ease;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

@media (prefers-reduced-motion: reduce){
  *{transition:none!important; animation:none!important}
}
.site-nav{
  background: var(--header-bg) !important;
  color: var(--header-text) !important;
  border-bottom: 1px solid var(--header-border);
}
.card{
  background: var(--card) !important;
  color: var(--text) !important;
  border: 1px solid var(--card-border);
  border-radius: 0.75rem;
  box-shadow: var(--shadow);
  transition: background-color 0.18s ease, border-color 0.18s ease, color 0.18s ease, transform 0.12s ease, box-shadow 0.12s ease;
  padding: 1rem;
  margin-bottom: 1rem;
}
.card:hover{ transform: none; box-shadow: var(--shadow); }
.card:focus{ outline: 2px solid var(--focus-ring); outline-offset: 2px; }

/* Card structure helpers */
.card-header{ display:flex; align-items:center; justify-content:space-between; gap:0.5rem; padding-bottom:0.5rem; border-bottom:1px solid var(--muted-border); }
.dark .card-header{ border-bottom-color: var(--muted-border); }
.card-title{ font-size:1.05rem; font-weight:700; color:var(--text); }
.card-sub{ font-size:0.9rem; color:var(--muted); }
.card-body{ padding-top:0.75rem; padding-bottom:0.75rem; }
.card-footer{ padding-top:0.5rem; border-top:1px solid var(--muted-border); display:flex; justify-content:flex-end; gap:0.5rem; }
.dark .card-footer{ border-top-color: var(--muted-border); }

/* Size modifiers */
.card-sm{ padding:0.5rem; }
.card-lg{ padding:1.5rem; }

/* Grid helpers for listing cards */
.card-grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap:1rem; }

/* Small visual tweaks for mobile */
@media (max-width: 640px){
  .card{ padding:0.75rem; margin-bottom:0.75rem; }
  .card-header{ padding-bottom:0.4rem }
}
.button-primary{
  background: var(--btn-bg); color: var(--btn-text); padding: 0.5rem 0.75rem; border-radius: 0.375rem; display:inline-block; border:none; cursor:pointer; font-weight:600;
}
.button-primary:hover{filter:brightness(0.97)}
.button-primary:focus{box-shadow:var(--focus-ring); outline:none}
.theme-toggle{transition: none}
.theme-toggle:hover{transform:none}

a[role="button"].button-primary{display:inline-flex;align-items:center;justify-content:center}

.theme-toggle{
  background: transparent;
  border: 1px solid var(--muted-border);
  padding: 6px; /* increased for tappable area */
  border-radius: 8px;
  color: inherit;
  display: inline-flex; align-items:center; justify-content:center;
}

.theme-toggle svg{ stroke: currentColor; }
.avatar{
  width:32px;height:32px;border-radius:9999px;display:inline-flex;align-items:center;justify-content:center;font-weight:600;background:var(--primary);color:var(--btn-text);border:1px solid var(--avatar-border);box-shadow:0 2px 6px rgba(0,0,0,0.08);
}
.dark .avatar{ 
  border:1px solid var(--avatar-border); 
  box-shadow:0 2px 6px rgba(0,0,0,0.18); 
  color: var(--btn-text);
}
/* User dropdown positioning and mobile behavior */
.user-dropdown{ position:absolute; right:0; top:calc(var(--header-h,3.5rem) + 0.25rem); z-index:60; min-width:14rem; }
user-dropdown .card{ padding:0.5rem; }
user-dropdown hr{ border:none; height:1px; background:var(--muted-border); margin:0.5rem 0 }
.dark .user-dropdown hr{ background: var(--muted-border); }

/* Dropdown item styling */
.user-dropdown .dropdown-item, .user-dropdown a.block{ display:block; padding:0.5rem 0.75rem; border-radius:6px; }
.user-dropdown .dropdown-item{ border-bottom:1px solid var(--muted-border); }
.user-dropdown .dropdown-item:last-child{ border-bottom:none }
.dark .user-dropdown .dropdown-item{ border-bottom:1px solid var(--muted-border); }
.user-dropdown .card .text-muted{ color:var(--muted); }

/* Ensure dropdown doesn't overlap header elements and is aligned to right */
.site-nav{ position:relative }

/* On small screens hide separate mobile-menu nav links (we include them in the profile dropdown) */
@media (max-width: 767px){
  #mobile-menu .mobile-nav-only{ display:none; }
}
/* mobile menu specific safe area */
.mobile-menu{
  padding-bottom:env(safe-area-inset-bottom,12px);
  background: rgba(245, 235, 220, 0.92) !important;
  backdrop-filter: blur(8px) brightness(0.8);
  -webkit-backdrop-filter: blur(8px) brightness(0.8);
}

/* ensure links don't overflow */
.nav-links a{white-space:nowrap; color:var(--header-text);} 
.site-nav a[aria-current="page"]{ color:var(--primary); font-weight:700; }
.site-nav a{ color:var(--header-text); }
.site-nav a:hover{ background: var(--hover-bg); }
.mobile-menu{ background: var(--header-bg); }

/* Accessible skip link */
.sr-only{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important}
.sr-only:focus{position:static!important;width:auto!important;height:auto!important;margin:0!important;overflow:visible!important;clip:auto!important;white-space:normal!important}

/* Focus-visible improvements */
:focus{outline:none}
:focus-visible{box-shadow: var(--focus-ring); outline: none}

/* Status color utilities */
.bg-success{background-color: var(--success-bg);}
.text-success{color: var(--success);}
.border-success{border-color: var(--success);}

.bg-error{background-color: var(--error-bg);}
.text-error{color: var(--error);}
.border-error{border-color: var(--error);}

.bg-warning{background-color: var(--warning-bg);}
.text-warning{color: var(--warning);}
.border-warning{border-color: var(--warning);}

.bg-info{background-color: var(--info-bg);}
.text-info{color: var(--info);}
.border-info{border-color: var(--info);}

/* Button variants */
.btn-primary{
  background: var(--btn-bg);
  color: var(--btn-text);
  padding: 0.5rem 0.75rem;
  border-radius: 0.375rem;
  display: inline-block;
  border: none;
  cursor: pointer;
  font-weight: 600;
  transition: background-color 0.2s ease;
}
.btn-primary:hover{
  background: var(--btn-hover);
}
.btn-primary:focus{
  box-shadow: var(--focus-ring);
  outline: none;
}

/* Admin badge */
.admin-badge{
  background: var(--warning-bg);
  color: var(--warning);
  font-size: 0.75rem;
  font-weight: 600;
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
}

/* Modal styles */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal.hidden {
  display: none;
}

.modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(2px);
}

.modal-content {
  position: relative;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: 0.75rem;
  padding: 1.5rem;
  max-width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  width: 100%;
  max-width: 600px;
  box-shadow: var(--shadow-strong);
  z-index: 1001;
}

.dark .modal-overlay {
  background: rgba(0, 0, 0, 0.7);
}

/* Clickable application cards */
.application-card {
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.application-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-strong);
}

/* Theme-aware color overrides for common Tailwind classes */
.bg-gray-50, .bg-gray-100{ background-color: var(--bg) !important; }
.bg-white{ background-color: var(--card) !important; }
.text-gray-900{ color: var(--text) !important; }
.text-gray-700{ color: var(--text) !important; }
.text-gray-600{ color: var(--text-secondary) !important; }
.text-gray-500{ color: var(--muted) !important; }
.border-gray-300{ border-color: var(--muted-border) !important; }

/* Primary action colors */
.bg-blue-500, .bg-blue-600, .bg-indigo-600{ background-color: var(--primary) !important; }
.hover\:bg-blue-600:hover, .hover\:bg-indigo-700:hover{ background-color: var(--btn-hover) !important; }
.text-blue-600, .text-blue-500{ color: var(--primary) !important; }
.hover\:text-blue-500:hover{ color: var(--primary-dark) !important; }
.bg-blue-50{ background-color: var(--accent) !important; }
.hover\:bg-blue-100:hover{ background-color: var(--hover-bg) !important; }

/* Success colors */
.bg-green-500, .bg-green-100{ background-color: var(--success-bg) !important; }
.text-green-600, .text-green-700{ color: var(--success) !important; }
.border-green-400{ border-color: var(--success) !important; }
.hover\:text-green-500:hover{ color: var(--success) !important; }

/* Warning colors */
.text-yellow-500, .text-yellow-600{ color: var(--warning) !important; }
.hover\:text-yellow-500:hover{ color: var(--warning) !important; }

/* Error colors */
.bg-red-600, .bg-red-700{ background-color: var(--error) !important; }
.hover\:bg-red-700:hover{ background-color: var(--error) !important; }
.text-red-600{ color: var(--error) !important; }

/* Focus states */
.focus\:ring-blue-500:focus, .focus\:ring-indigo-500:focus{ 
  --tw-ring-color: var(--primary) !important; 
}
.focus\:border-blue-500:focus, .focus\:border-indigo-500:focus{ 
  border-color: var(--primary) !important; 
}

/* Ensure mobile menu drawer has an opaque blurred background */
#mobile-menu > .mobile-menu{
  background-color: rgba(255,255,255,0.96) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
}
.dark #mobile-menu > .mobile-menu{
  background-color: rgba(10,12,20,0.92) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
}

