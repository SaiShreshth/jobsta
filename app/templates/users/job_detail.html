{% extends "base.html" %}

{% block content %}

<h1 class="text-2xl font-bold mb-4">{{ job.title }}</h1>

<p class="mb-2"><strong>Company:</strong> {{ job.company }}</p>

<p class="mb-2"><strong>Location:</strong> {{ job.location }}</p>

<p class="mb-2"><strong>Salary:</strong> {{ job.salary }}</p>

<p class="mb-4">{{ job.description }}</p>

{% if applied %}

<p class="text-green-600">You have already applied for this job.</p>

{% else %}

<form method="post" action="{{ url_for('users.apply', job_id=job.id) }}">

    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Apply</button>

</form>

{% endif %}

<h2 class="text-xl font-bold mb-2">Reviews</h2>

{% for review in reviews %}

<div class="bg-gray-100 p-4 rounded mb-2">

    <p>Rating: {{ review.rating }}/5</p>

    <p>{{ review.comment }}</p>

</div>

{% endfor %}

{% if applied %}

<h2 class="text-xl font-bold mb-2">Leave a Review</h2>

<form method="post" action="{{ url_for('users.review', job_id=job.id) }}" class="max-w-lg">

    <div class="mb-4">

        <label for="rating" class="block text-sm font-medium text-gray-700">Rating:</label>

        <select name="rating" id="rating" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">

            <option value="1">1</option>

            <option value="2">2</option>

            <option value="3">3</option>

            <option value="4">4</option>

            <option value="5">5</option>

        </select>

    </div>

    <div class="mb-4">

        <label for="comment" class="block text-sm font-medium text-gray-700">Comment:</label>

        <textarea name="comment" id="comment" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"></textarea>

    </div>

    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Submit Review</button>

</form>

{% endif %}

<a href="{{ url_for('users.dashboard') }}" class="text-blue-500">Back to Dashboard</a>

{% endblock %}