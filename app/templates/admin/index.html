{% extends "base.html" %}

{% block content %}

<h1 class="text-2xl font-bold mb-4">Admin Dashboard</h1>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">

    <div class="card p-4 rounded shadow">

        <h3 class="text-lg font-bold">Total Jobs</h3>

        <p class="text-2xl">{{ jobs_count }}</p>

    </div>

    <div class="card p-4 rounded shadow">

        <h3 class="text-lg font-bold">Total Users</h3>

        <p class="text-2xl">{{ users_count }}</p>

    </div>

</div>

<div class="flex items-center justify-between mb-4">
    <a href="{{ url_for('admin.new_job') }}" class="button-primary mb-0 inline-block">Create New Job</a>
    <div class="text-sm text-muted">Signed in as <strong>root</strong></div>
</div>

<h2 class="text-xl font-bold mb-2">Jobs</h2>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">

{% for job in jobs %}

<div class="card p-4 rounded shadow">

    <div class="flex items-start justify-between mb-2">
        <h3 class="text-lg font-bold">{{ job.title }}</h3>
        {% if job.status is defined %}
        <span class="text-xs px-2 py-1 rounded {% if job.status == 'active' %}bg-success text-success{% elif job.status == 'archived' %}bg-warning text-warning{% else %}bg-error text-error{% endif %}">
            {{ job.status }}
        </span>
        {% endif %}
    </div>

    <p class="text-gray-600">{{ job.company }}</p>

    <p class="text-gray-600">{{ job.location }}</p>
    
    {% if job.deadline is defined and job.deadline %}
    <p class="text-sm text-muted mt-2">Deadline: {{ job.deadline.strftime('%Y-%m-%d') }}</p>
    {% endif %}

    <div class="mt-4 flex gap-2">
        <a href="{{ url_for('admin.edit_job', job_id=job.id) }}" class="btn-primary text-sm py-1 px-3">Edit</a>
        <a href="{{ url_for('admin.delete_job', job_id=job.id) }}" class="text-error text-sm py-1 px-3 border border-error rounded hover:bg-error hover:text-white">Delete</a>
    </div>

</div>

{% endfor %}

</div>

{% endblock %}